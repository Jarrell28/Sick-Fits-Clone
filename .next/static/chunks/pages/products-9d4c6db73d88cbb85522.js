_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{cUBK:function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return N}));var i=n("nKUr"),r=n("jT3O"),d=n("VX74"),o=n("lTCR"),a=n.n(o),c=n("vOnD"),s=n("obyI"),u=c.b.div.withConfig({displayName:"ItemStyles",componentId:"sc-16pk14u-0"})(["background:white;border:1px solid var(--offWhite);box-shadow:var(--bs);position:relative;display:flex;flex-direction:column;img{width:100%;height:400px;object-fit:cover;}p{line-height:2;font-weight:300;flex-grow:1;padding:0 3rem;font-size:1.5rem;}.buttonList{display:grid;width:100%;border-top:1px solid var(--lightGray);grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:1px;background:var(--lightGray);& > *{background:white;border:0;font-size:1rem;padding:1rem;}}"]),l=c.b.h3.withConfig({displayName:"Title",componentId:"sc-16nq74k-0"})(["margin:0 1rem;text-align:center;transform:skew(-5deg) rotate(-1deg);margin-top:-3rem;text-shadow:2px 2px 0 rgba(0,0,0,0.1);a{background:var(--red);display:inline;line-height:1.3;font-size:4rem;text-align:center;color:white;padding:0 1rem;}"]),p=c.b.span.withConfig({displayName:"PriceTag",componentId:"nwbk6t-0"})(["background:var(--red);transform:rotate(3deg);color:white;font-weight:600;padding:5px;line-height:1;font-size:3rem;display:inline-block;position:absolute;top:-3px;right:-3px;"]),b=n("YFqc"),g=n.n(b),f=n("2y/O"),h=n("xvhg");function j(){var t=Object(r.a)(["\n    mutation DELETE_PRODUCT_MUTATION($id: ID!){\n        deleteProduct(id: $id){\n            id\n            name\n        }\n    }\n"]);return j=function(){return t},t}var m=a()(j());function x(t,e){t.evict(t.identify(e.data.deleteProduct))}function v(t){var e=t.id,n=t.children,r=Object(d.useMutation)(m,{variables:{id:e},update:x}),o=Object(h.a)(r,2),a=o[0],c=o[1].loading;return Object(i.jsx)("button",{type:"button",disabled:c,onClick:function(){confirm("Are you sure you want to delete this item?")&&a(e).catch((function(t){return alert(t.message)}))},children:n})}var O=n("VliS");function w(){var t=Object(r.a)(["\n    mutation ADD_TO_CART_MUTATION($id: ID!) {\n        addToCart(productId: $id){\n            id\n        }\n    }\n"]);return w=function(){return t},t}var y=a()(w());function _(t){var e=t.id,n=Object(d.useMutation)(y,{variables:{id:e},refetchQueries:[{query:O.a}]}),r=Object(h.a)(n,2),o=r[0],a=r[1].loading;return Object(i.jsxs)("button",{disabled:a,type:"button",onClick:o,children:["Add",a&&"ing"," To Cart!"]})}function T(t){var e,n,r=t.product;return Object(i.jsxs)(u,{children:[Object(i.jsx)("img",{src:null===r||void 0===r||null===(e=r.photo)||void 0===e||null===(n=e.image)||void 0===n?void 0:n.publicUrlTransformed,alt:r.name}),Object(i.jsx)(l,{children:Object(i.jsx)(g.a,{href:"/product/".concat(r.id),children:r.name})}),Object(i.jsx)(p,{children:Object(f.a)(r.price)}),Object(i.jsx)("p",{children:r.description}),Object(i.jsxs)("div",{className:"buttonList",children:[Object(i.jsx)(g.a,{href:{pathname:"update",query:{id:r.id}},children:"Edit"}),Object(i.jsx)(_,{id:r.id}),Object(i.jsx)(v,{id:r.id,children:"Delete"})]})]})}function k(){var t=Object(r.a)(["\n    query ALL_PRODUCTS_QUERY($skip: Int = 0, $first: Int){\n        allProducts(first: $first, skip: $skip) {\n            id\n            name\n            price\n            description\n            photo {\n            id\n            image {\n                publicUrlTransformed\n            }\n            }\n        }\n    }\n"]);return k=function(){return t},t}var I=a()(k()),C=c.b.div.withConfig({displayName:"Products__ProductsList",componentId:"sc-1uv5x8m-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:60px;"]);function N(t){var e=t.page,n=Object(d.useQuery)(I,{variables:{skip:e*s.a-s.a,first:s.a}}),r=n.data,o=n.error;return n.loading?Object(i.jsx)("p",{children:"Loading..."}):o?Object(i.jsxs)("p",{children:["Error: ",o.message]}):Object(i.jsx)("div",{children:Object(i.jsx)(C,{children:null===r||void 0===r?void 0:r.allProducts.map((function(t){return Object(i.jsx)(T,{product:t},t.id)}))})})}},my7y:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return a}));var i=n("nKUr"),r=n("nOHt"),d=n("KzMt"),o=n("cUBK");function a(){var t=Object(r.useRouter)().query,e=parseInt(t.page);return Object(i.jsxs)("div",{children:[Object(i.jsx)(d.b,{page:e||1}),Object(i.jsx)(o.b,{page:e||1}),Object(i.jsx)(d.b,{page:e||1})]})}},pqrm:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return n("my7y")}])}},[["pqrm",0,1,2,3,4,5]]]);